(()=>{"use strict";var e={867:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});const n=r.p+"index.html"},273:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});const n=r.p+"favicon.ico"},116:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});const n=r.p+"index.css"}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{r(867),r(116),r(273);const e=document.getElementById("canvas"),t=e.getContext("2d"),n=document.getElementById("json"),o={};localStorage&&localStorage.savedJSON?n.value=localStorage.savedJSON:n.value=JSON.stringify([{url:"http://file/to/url.png",x:500,y:500},{url:"http://file/to/url.jpg",x:842,y:184}],void 0,4);const a=document.getElementById("baseUnder");a.addEventListener("input",(()=>{e.style.background=a.checked?"url('https://pxlsfiddle.com/board')":"rgba(0, 0, 0, 0.1)"}));const i=document.getElementById("canvasWidth");i.value=e.width+"";const c=document.getElementById("canvasHeight");function l(e,r=0,n=0){t.drawImage(o[e.url],r,n)}function s(t,r,n=!1,a=!1){const i=a?e.height:e.width;a?o[r.url].height:o[r.url].width;let c=0;if("string"==typeof t&&t.endsWith("%")){const e=parseInt(t.slice(0,-1));if(isNaN(e))return c;c=e/100*i}else{const e="string"==typeof t?parseInt(t):t;if(isNaN(e))return c;c=e}return c}function d(){try{return t.getImageData(0,0,1,1),!1}catch(e){return e instanceof DOMException&&18===e.code}}c.value=e.height+"";const u=document.getElementById("clickity"),p=document.getElementById("newtabity");function g(){e.width=parseInt(i.value),e.height=parseInt(c.value);const r=JSON.stringify(JSON.parse(n.value),void 0,"\t");n.value=r,localStorage.savedJSON=r,t.clearRect(0,0,e.width,e.height);for(const e of JSON.parse(n.value).reverse())o[e.url]?l(e,s(e.x,e),s(e.y,e,!0)):(o[e.url]=new Image,o[e.url].src=e.url,o[e.url].addEventListener("load",(function(){l(e,s(e.x,e,e.fromCenter),s(e.y,e,e.fromCenter,!0))})));p.disabled=d()}u.addEventListener("click",g),p.addEventListener("click",(()=>{g(),d()?(p.disabled=!0,alert("You used images from a site that does not allowed Cross-Origin Resource Sharing, so you cannot use this feature.")):(p.disabled=!1,document.location.href=`https://pxls.space/#template=${encodeURIComponent(e.toDataURL())}&ox=0&oy=0`)}))})()})();